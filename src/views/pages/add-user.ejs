<%- include('../partials/head',{title:'Agregar usuario'}); %>

    <body id="page-top">
        <!-- Page Wrapper -->
        <div id="wrapper">

            <!-- Sidebar -->
            <%- include('../partials/menu'); %>
                <!-- End of Sidebar -->

                <!-- Content Wrapper -->
                <div id="content-wrapper" class="d-flex flex-column">

                    <!-- Main Content -->
                    <div id="content">

                        <!-- Topbar -->
                        <%- include('../partials/navbar'); %>
                            <!-- End of Topbar -->

                            <!-- Begin Page Content -->
                            <div class="container-fluid">
                                <!-- Page Heading -->
                                <h5 class="h3 mb-4 text-gray-800">Agregar Usuario</h5>

                                <form id="create">
                                    <div class="form-row">
                                        <div class="form-group col-md-8">
                                            <label for="inputFirstName">Nombre</label>
                                            <input type="text" class="form-control" id="inputFirstName">
                                        </div>
                                    </div>
                                    <div class="form-row">
                                        <div class="form-group col-md-8">
                                            <label for="inputLastName">Apellidos</label>
                                            <input type="text" class="form-control" id="inputLastName">
                                        </div>
                                    </div>
                                    <div class="form-row">
                                        <div class="form-group col-md-8">
                                            <label for="inputEmail">Correo Electrónico</label>
                                            <input type="email" class="form-control" id="inputEmail">
                                        </div>
                                    </div>
                                    <div class="form-row">
                                        <div class="form-group col-md-8">
                                            <label for="inputPassword">Contraseña</label>
                                            <input type="password" class="form-control" id="inputPassword">
                                        </div>
                                    </div>
                                    <button type="submit" class="btn btn-primary">
                                        <i class="fas fa-save"></i>
                                        Registrar
                                    </button>
                                </form>

                            </div>
                            <!-- /.container-fluid -->

                            <!-- End of Main Content -->

                            <!-- Footer -->
                            <footer class="sticky-footer bg-white">
                                <div class="container my-auto">
                                    <div class="copyright text-center my-auto">
                                        <span>Copyright &copy; Your Website 2020</span>
                                    </div>
                                </div>
                            </footer>
                            <!-- End of Footer -->
                    </div>
                    <!-- End of Content Wrapper -->
                </div>
                <!-- End of Page Wrapper -->

                <script>
                    const form = document.getElementById('create');
                    const inputs = form.querySelectorAll('input');

                    form.addEventListener('submit', (evt) => {
                        evt.preventDefault();
                        const data = {
                            firstname: inputs[0].value,
                            lastname: inputs[1].value,
                            email: inputs[2].value,
                            password: inputs[3].value
                        }
                        
                        fetch('http://127.0.0.1:3000/user/create', {
                            method: 'POST', 
                            mode: 'cors',
                            cache: 'no-cache',
                            credentials: 'same-origin',
                            headers: {
                                'Content-Type': 'application/json'
                            },
                                body: JSON.stringify(data),
                            })
                            .then((response) => response.json())
                            .then(({ msg }) => {
                                alert(msg);
                                window.location.reload();
                            })
                            .catch((error) => {
                                console.error('Error:', error);
                            });

                    });
                </script>

                <%- include('../partials/footer'); %>